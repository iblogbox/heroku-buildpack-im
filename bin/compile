#!/usr/bin/env bash

indent() {
  sed -u 's/^/       /'
}

BUILD_DIR="$1"
SOURCE_DIR="$(dirname $0)/../compiled"
TARGET_DIR="$BUILD_DIR/vendor/bin"

echo "-----> Copying files to $TARGET_DIR"

mkdir -p "$TARGET_DIR"

chmod +x "$SOURCE_DIR/anim_diff"
cp "$SOURCE_DIR/anim_diff" "$TARGET_DIR"

chmod +x "$SOURCE_DIR/cwebp"
cp "$SOURCE_DIR/cwebp" "$TARGET_DIR"

chmod +x "$SOURCE_DIR/dwebp"
cp "$SOURCE_DIR/dwebp" "$TARGET_DIR"

chmod +x "$SOURCE_DIR/gif2webp"
cp "$SOURCE_DIR/gif2webp" "$TARGET_DIR"

chmod +x "$SOURCE_DIR/JxrDecApp"
cp "$SOURCE_DIR/JxrDecApp" "$TARGET_DIR"

chmod +x "$SOURCE_DIR/JxrEncApp"
cp "$SOURCE_DIR/JxrEncApp" "$TARGET_DIR"

chmod +x "$SOURCE_DIR/vwebp"
cp "$SOURCE_DIR/vwebp" "$TARGET_DIR"

chmod +x "$SOURCE_DIR/webpmux"
cp "$SOURCE_DIR/webpmux" "$TARGET_DIR"


mkdir -p "$BUILD_DIR/.intltool"
cd "$BUILD_DIR/.intltool"
wget http://launchpad.net/intltool/trunk/0.50.2/+download/intltool-0.50.2.tar.gz
tar -xf intltool-0.50.2.tar.gz
cd intltool-0.50.2
./configure
make

# inkscape
mkdir -p "$BUILD_DIR/.inkscape/"
cd "$BUILD_DIR/.inkscape/"
wget https://inkscape.org/en/gallery/item/3854/inkscape-0.91.tar.gz
tar -xf inkscape-0.91.tar.gz
cd inkscape-0.91
./configure
make
export PATH="$BUILD_DIR/.inkscape/inkscape-0.91/bin":$PATH
